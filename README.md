# macOS 启动项管理器

这是一个用于管理和删除 macOS 系统中 LaunchAgents 和 LaunchDaemons 文件的简单应用程序。特别针对于"允许在后台"项目的删除，帮助您清理已卸载软件的残留启动项。

## 功能亮点

- **全局搜索功能**：快速搜索所有文件夹中的启动项文件
- **智能高亮显示**：自动识别并高亮显示包含以下路径的内容
  - `/Applications/` - 应用程序目录
  - `/Application Support/` - 应用程序支持目录
  - `/Library/` - 系统库目录
- **实时预览面板**：直接在界面上查看选中文件的内容
- **自动定位**：自动滚动到关键路径位置，无需手动查找
- **批量删除**：支持选择多个文件进行批量删除

## 监控文件夹

程序自动监控以下系统目录中的启动项：
- `~/Library/LaunchAgents` - 用户级启动项
- `/System/Library/LaunchAgents` - 系统级启动项
- `/System/Library/LaunchDaemons` - 系统守护进程
- `/Library/LaunchAgents` - 全局启动项
- `/Library/LaunchDaemons` - 全局守护进程

## 安装依赖

在运行此程序之前，您需要安装 PyQt5：

```bash
pip install PyQt5
```

## 运行程序

```bash
python launch_manager.py
```

对于需要管理员权限的操作（例如删除系统文件夹中的文件）：

```bash
sudo python launch_manager.py
```

## 使用说明

### 打开系统设置
   查看"允许在后台"的列表

### 搜索功能
1. 在顶部搜索框中输入"允许在后台"的列表关键词
2. 点击"搜索"按钮或按回车键
3. 在搜索结果列表中查看匹配的文件
4. 点击搜索结果项会自动跳转到对应的文件夹和文件

### 文件浏览与预览
1. 在左侧列表中选择要查看的文件夹
2. 中间列表将显示该文件夹中的所有 .plist 文件
3. 选中中间列表中的文件，右侧预览面板会自动显示文件内容
   - 包含应用路径的内容会被自动高亮显示（黄色背景）
   - 预览面板会自动滚动到关键路径位置
   - 通过查看高亮内容可以判断该文件是否为已卸载软件的残留

### 文件操作
1. **查看文件**：双击文件或选择文件后点击"打开文件"按钮可在弹出窗口中查看完整内容
2. **删除文件**：
   - 选择要删除的文件（可以按住 Ctrl 或 Command 键选择多个文件）
   - 点击"删除选中文件"按钮
   - 确认删除操作

## 如何判断可删除的启动项

查看高亮显示的路径内容，判断对应的应用程序是否已被删除：

1. 如果看到如下内容：
   ```xml
   <string>/Applications/极光PDF.app/Contents/MacOS/</string>
   ```
   说明此项与极光PDF软件有关。
   
2. 检查对应应用是否存在：
   - 如果`/Applications/极光PDF.app`已不存在，则此启动项可以安全删除
   - 如果应用仍然存在，请谨慎删除

## 注意事项

- 删除系统文件夹中的文件需要管理员权限
- 删除某些系统文件可能会影响系统功能，请谨慎操作
- 建议在删除前先备份重要文件
- 程序使用 plutil 命令将二进制 plist 文件转换为可读的 XML 格式

## 支持的macOS版本

- macOS Monterey (12.x)
- macOS Ventura (13.x)
- macOS Sonoma (14.x) 